{
  "settings": {
    "analysis": {
      "analyzer": {
        "vietnamese_analyzer": {
          "type": "custom",
          "tokenizer": "icu_tokenizer",
          "filter": [
            "lowercase",
            "icu_folding",
            "vietnamese_stop",
            "vietnamese_synonym"
          ]
        },
        "vietnamese_suggest_analyzer": {
          "type": "custom",
          "tokenizer": "icu_tokenizer",
          "filter": [
            "lowercase",
            "icu_folding",
            "vietnamese_stop"
          ]
        },
        "trigram": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "shingle"
          ]
        },
        "reverse": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "reverse"
          ]
        }
      },
      "filter": {
        "vietnamese_stop": {
          "type": "stop",
          "stopwords": [
            "có",
            "con",
            "gì",
            "nào",
            "là",
            "thì",
            "với",
            "cho",
            "tại",
            "này",
            "đó",
            "ở",
            "và",
            "hôm",
            "nay",
            "món",
            "nấu",
            "làm",
            "ăn",
            "thế",
            "nào",
            "hướng",
            "dẫn",
            "một",
            "những",
            "của",
            "trong",
            "từ",
            "được",
            "ra",
            "vào",
            "bằng",
            "trên",
            "dưới",
            "ngoài",
            "gần",
            "xa",
            "khi",
            "sau",
            "trước",
            "aromatic"
          ]
        },
        "vietnamese_synonym": {
          "type": "synonym",
          "synonyms": [
            "ngon => tuyệt vời, ngon lành, hấp dẫn",
            "chả giò => chả ram, nem rán",
            "cá => cá thu, cá hồi, cá lóc",
            "thịt => thịt heo, thịt bò, thịt gà",
            "bún => bún gạo, bún tươi",
            "nước mắm => mắm nêm, mắm tôm"
          ]
        },
        "shingle": {
          "type": "shingle",
          "min_shingle_size": 2,
          "max_shingle_size": 3
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "id": {
        "type": "keyword"
      },
      "title": {
        "type": "text",
        "analyzer": "vietnamese_analyzer",
        "fields": {
          "suggest": {
            "type": "search_as_you_type",
            "analyzer": "vietnamese_suggest_analyzer",
            "max_shingle_size": 3
          },
          "trigram": {
            "type": "text",
            "analyzer": "trigram"
          },
          "reverse": {
            "type": "text",
            "analyzer": "reverse"
          }
        }
      },
      "cookingTime": {
        "type": "integer"
      },
      "difficulty": {
        "type": "keyword"
      },
      "description": {
        "type": "text",
        "analyzer": "vietnamese_analyzer",
        "fields": {
          "suggest": {
            "type": "search_as_you_type",
            "analyzer": "vietnamese_suggest_analyzer",
            "max_shingle_size": 3
          },
          "trigram": {
            "type": "text",
            "analyzer": "trigram"
          },
          "reverse": {
            "type": "text",
            "analyzer": "reverse"
          }
        }
      },
      "servings": {
        "type": "integer"
      },
      "accountId": {
        "type": "keyword"
      },
      "accountName": {
        "type": "text",
        "analyzer": "vietnamese_analyzer",
        "fields": {
          "trigram": {
            "type": "text",
            "analyzer": "trigram"
          },
          "reverse": {
            "type": "text",
            "analyzer": "reverse"
          }
        }
      },
      "categoryIds": {
        "type": "keyword"
      },
      "ingredients": {
        "type": "nested",
        "properties": {
          "name": {
            "type": "text",
            "analyzer": "vietnamese_analyzer",
            "fields": {
              "suggest": {
                "type": "search_as_you_type",
                "analyzer": "vietnamese_suggest_analyzer",
                "max_shingle_size": 3
              },
              "trigram": {
                "type": "text",
                "analyzer": "trigram"
              },
              "reverse": {
                "type": "text",
                "analyzer": "reverse"
              }
            }
          },
          "quantity": {
            "type": "text"
          }
        }
      },
      "instructions": {
        "type": "nested",
        "properties": {
          "step": {
            "type": "integer"
          },
          "description": {
            "type": "text",
            "analyzer": "vietnamese_analyzer",
            "fields": {
              "suggest": {
                "type": "search_as_you_type",
                "analyzer": "vietnamese_suggest_analyzer",
                "max_shingle_size": 3
              },
              "trigram": {
                "type": "text",
                "analyzer": "trigram"
              },
              "reverse": {
                "type": "text",
                "analyzer": "reverse"
              }
            }
          }
        }
      },
      "images": {
        "type": "nested",
        "properties": {
          "url": {
            "type": "keyword"
          }
        }
      },
      "isDeleted": {
        "type": "boolean"
      },
      "createdAt": {
        "type": "date"
      }
    }
  }
}