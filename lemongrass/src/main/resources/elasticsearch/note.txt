{
  "settings": {
    "analysis": {
      "analyzer": {
        "hybrid_vietnamese_analyzer": {
          "type": "custom",
          "tokenizer": "vi_tokenizer",
          "filter": [
            "lowercase",
            "icu_folding",
            "vietnamese_stop",
            "vietnamese_synonym"
          ]
        },
        "vietnamese_suggest_analyzer": {
          "type": "custom",
          "tokenizer": "vi_tokenizer",
          "filter": [
            "lowercase",
            "icu_folding",
            "vietnamese_stop",
            "edge_ngram_filter"
          ]
        },
        "icu_analyzer": {
          "type": "custom",
          "tokenizer": "icu_tokenizer",
          "filter": [
            "lowercase",
            "icu_folding"
          ]
        },
        "trigram": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "shingle"
          ]
        },
        "reverse": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "reverse"
          ]
        }
      },
      "filter": {
        "edge_ngram_filter": {
          "type": "edge_ngram",
          "min_gram": 2,
          "max_gram": 20
        },
        "vietnamese_stop": {
          "type": "stop",
          "stopwords": [
            "có",
            "con",
            "gì",
            "nào",
            "là",
            "thì",
            "với",
            "cho",
            "tại",
            "này",
            "đó",
            "ở",
            "và",
            "món",
            "nấu",
            "làm",
            "ăn",
            "một",
            "những",
            "của",
            "trong",
            "từ",
            "được",
            "ra",
            "vào",
            "bằng"
          ]
        },
        "vietnamese_synonym": {
          "type": "synonym",
          "synonyms": [
            "ngon => tuyệt vời, ngon lành, hấp dẫn",
            "chả giò => chả ram, nem rán",
            "cá => cá thu, cá hồi, cá lóc",
            "thịt => thịt heo, thịt bò, thịt gà",
            "bún => bún gạo, bún tươi",
            "nước mắm => mắm nêm, mắm tôm",
            "gà => thịt gà, gà rán, gà luộc",
            "rau => rau củ, rau bina, cải xanh",
            "nướng => nướng than, nướng điện",
            "chiên => rán, xào"
          ]
        },
        "shingle": {
          "type": "shingle",
          "min_shingle_size": 2,
          "max_shingle_size": 3
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "id": {
        "type": "keyword"
      },
      "title": {
        "type": "text",
        "analyzer": "hybrid_vietnamese_analyzer",
        "fields": {
          "suggest": {
            "type": "search_as_you_type",
            "analyzer": "vietnamese_suggest_analyzer",
            "max_shingle_size": 3
          },
          "trigram": {
            "type": "text",
            "analyzer": "trigram"
          },
          "reverse": {
            "type": "text",
            "analyzer": "reverse"
          },
          "icu": {
            "type": "text",
            "analyzer": "icu_analyzer"
          }
        }
      },
      "cookingTime": {
        "type": "integer"
      },
      "difficulty": {
        "type": "keyword"
      },
      "description": {
        "type": "text",
        "analyzer": "hybrid_vietnamese_analyzer",
        "fields": {
          "suggest": {
            "type": "search_as_you_type",
            "analyzer": "vietnamese_suggest_analyzer",
            "max_shingle_size": 3
          },
          "trigram": {
            "type": "text",
            "analyzer": "trigram"
          },
          "reverse": {
            "type": "text",
            "analyzer": "reverse"
          },
          "icu": {
            "type": "text",
            "analyzer": "icu_analyzer"
          }
        }
      },
      "servings": {
        "type": "integer"
      },
      "accountId": {
        "type": "keyword"
      },
      "accountName": {
        "type": "text",
        "analyzer": "hybrid_vietnamese_analyzer",
        "fields": {
          "trigram": {
            "type": "text",
            "analyzer": "trigram"
          },
          "reverse": {
            "type": "text",
            "analyzer": "reverse"
          },
          "icu": {
            "type": "text",
            "analyzer": "icu_analyzer"
          }
        }
      },
      "categoryIds": {
        "type": "keyword"
      },
      "ingredients": {
        "type": "nested",
        "properties": {
          "name": {
            "type": "text",
            "analyzer": "hybrid_vietnamese_analyzer",
            "fields": {
              "suggest": {
                "type": "search_as_you_type",
                "analyzer": "vietnamese_suggest_analyzer",
                "max_shingle_size": 3
              },
              "trigram": {
                "type": "text",
                "analyzer": "trigram"
              },
              "reverse": {
                "type": "text",
                "analyzer": "reverse"
              },
              "icu": {
                "type": "text",
                "analyzer": "icu_analyzer"
              }
            }
          },
          "quantity": {
            "type": "text"
          }
        }
      },
      "instructions": {
        "type": "nested",
        "properties": {
          "step": {
            "type": "integer"
          },
          "description": {
            "type": "text",
            "analyzer": "hybrid_vietnamese_analyzer",
            "fields": {
              "suggest": {
                "type": "search_as_you_type",
                "analyzer": "vietnamese_suggest_analyzer",
                "max_shingle_size": 3
              },
              "trigram": {
                "type": "text",
                "analyzer": "trigram"
              },
              "reverse": {
                "type": "text",
                "analyzer": "reverse"
              },
              "icu": {
                "type": "text",
                "analyzer": "icu_analyzer"
              }
            }
          }
        }
      },
      "images": {
        "type": "nested",
        "properties": {
          "url": {
            "type": "keyword"
          }
        }
      },
      "isDeleted": {
        "type": "boolean"
      },
      "createdAt": {
        "type": "date"
      }
    }
  }
}


PUT recipes
{
  "settings": {
    "analysis": {
      "analyzer": {
        "vietnamese_analyzer": {
          "type": "custom",
          "tokenizer": "icu_tokenizer",
          "filter": [
            "lowercase",
            "icu_folding",
            "vietnamese_stop",
            "vietnamese_synonym"
          ]
        },
        "vietnamese_suggest_analyzer": {
          "type": "custom",
          "tokenizer": "icu_tokenizer",
          "filter": [
            "lowercase",
            "icu_folding"
          ]
        }
      },
      "filter": {
        "vietnamese_stop": {
          "type": "stop",
          "stopwords": [
            "có","gì","nào","là","thì","với","cho","tại","này","đó","ở","và",
            "món","nấu","làm","ăn","hướng","dẫn","một","những","của","trong",
            "được","ra","vào","bằng","trên","dưới","ngoài","gần","xa","khi",
            "sau","trước"
          ]
        },
        "vietnamese_synonym": {
          "type": "synonym",
          "synonyms": [
            "ngon => tuyệt vời, hấp dẫn",
            "chả giò => nem rán, chả ram",
            "cá => cá thu, cá hồi, cá lóc",
            "thịt => thịt heo, thịt bò, thịt gà",
            "nước mắm => mắm nêm, mắm tôm"
          ]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "id": { "type": "keyword" },
      "title": {
        "type": "text",
        "analyzer": "vietnamese_analyzer",
        "fields": {
          "suggest": {
            "type": "search_as_you_type",
            "analyzer": "vietnamese_suggest_analyzer",
            "max_shingle_size": 3
          }
        }
      },
      "description": {
        "type": "text",
        "analyzer": "vietnamese_analyzer"
      },
      "ingredients": {
        "type": "nested",
        "properties": {
          "name": {
            "type": "text",
            "analyzer": "vietnamese_analyzer",
            "fields": {
              "suggest": {
                "type": "search_as_you_type",
                "analyzer": "vietnamese_suggest_analyzer",
                "max_shingle_size": 3
              }
            }
          },
          "quantity": { "type": "keyword" }
        }
      },
      "instructions": {
        "type": "nested",
        "properties": {
          "step": { "type": "integer" },
          "description": { "type": "text", "analyzer": "vietnamese_analyzer" }
        }
      },
      "accountId": { "type": "keyword" },
      "accountName": { "type": "text", "analyzer": "vietnamese_analyzer" },
      "categoryIds": { "type": "keyword" },
      "difficulty": { "type": "keyword" },
      "cookingTime": { "type": "integer" },
      "servings": { "type": "integer" },
      "images": {
        "type": "nested",
        "properties": {
          "url": { "type": "keyword" }
        }
      },
      "isDeleted": { "type": "boolean" },
      "createdAt": { "type": "date" },
      "vector": {
        "type": "dense_vector",
        "dims": 384,
        "index": true,
        "similarity": "cosine"
      }
    }
  }
}
////////////////////
{
  "settings": {
    "analysis": {
      "analyzer": {
        "vietnamese_analyzer": {
          "type": "custom",
          "tokenizer": "icu_tokenizer",
          "filter": [
            "lowercase",
            "icu_folding",
            "vietnamese_stop",
            "vietnamese_synonym"
          ]
        },
        "vietnamese_suggest_analyzer": {
          "type": "custom",
          "tokenizer": "icu_tokenizer",
          "filter": [
            "lowercase",
            "icu_folding",
            "vietnamese_stop"
          ]
        },
        "trigram": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "shingle"
          ]
        },
        "reverse": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "reverse"
          ]
        }
      },
      "filter": {
        "vietnamese_stop": {
          "type": "stop",
          "stopwords": [
            "có",
            "con",
            "gì",
            "nào",
            "là",
            "thì",
            "với",
            "cho",
            "tại",
            "này",
            "đó",
            "ở",
            "và",
            "hôm",
            "nay",
            "món",
            "nấu",
            "làm",
            "ăn",
            "thế",
            "nào",
            "hướng",
            "dẫn",
            "một",
            "những",
            "của",
            "trong",
            "từ",
            "được",
            "ra",
            "vào",
            "bằng",
            "trên",
            "dưới",
            "ngoài",
            "gần",
            "xa",
            "khi",
            "sau",
            "trước",
            "aromatic"
          ]
        },
        "vietnamese_synonym": {
          "type": "synonym",
          "synonyms": [
            "ngon => tuyệt vời, ngon lành, hấp dẫn",
            "chả giò => chả ram, nem rán",
            "cá => cá thu, cá hồi, cá lóc",
            "thịt => thịt heo, thịt bò, thịt gà",
            "bún => bún gạo, bún tươi",
            "nước mắm => mắm nêm, mắm tôm"
          ]
        },
        "shingle": {
          "type": "shingle",
          "min_shingle_size": 2,
          "max_shingle_size": 3
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "id": {
        "type": "keyword"
      },
      "title": {
        "type": "text",
        "analyzer": "vietnamese_analyzer",
        "fields": {
          "suggest": {
            "type": "search_as_you_type",
            "analyzer": "vietnamese_suggest_analyzer",
            "max_shingle_size": 3
          },
          "trigram": {
            "type": "text",
            "analyzer": "trigram"
          },
          "reverse": {
            "type": "text",
            "analyzer": "reverse"
          }
        }
      },
      "cookingTime": {
        "type": "integer"
      },
      "difficulty": {
        "type": "keyword"
      },
      "description": {
        "type": "text",
        "analyzer": "vietnamese_analyzer",
        "fields": {
          "suggest": {
            "type": "search_as_you_type",
            "analyzer": "vietnamese_suggest_analyzer",
            "max_shingle_size": 3
          },
          "trigram": {
            "type": "text",
            "analyzer": "trigram"
          },
          "reverse": {
            "type": "text",
            "analyzer": "reverse"
          }
        }
      },
      "servings": {
        "type": "integer"
      },
      "accountId": {
        "type": "keyword"
      },
      "accountName": {
        "type": "text",
        "analyzer": "vietnamese_analyzer",
        "fields": {
          "trigram": {
            "type": "text",
            "analyzer": "trigram"
          },
          "reverse": {
            "type": "text",
            "analyzer": "reverse"
          }
        }
      },
      "categoryIds": {
        "type": "keyword"
      },
      "ingredients": {
        "type": "nested",
        "properties": {
          "name": {
            "type": "text",
            "analyzer": "vietnamese_analyzer",
            "fields": {
              "suggest": {
                "type": "search_as_you_type",
                "analyzer": "vietnamese_suggest_analyzer",
                "max_shingle_size": 3
              },
              "trigram": {
                "type": "text",
                "analyzer": "trigram"
              },
              "reverse": {
                "type": "text",
                "analyzer": "reverse"
              }
            }
          },
          "quantity": {
            "type": "text"
          }
        }
      },
      "instructions": {
        "type": "nested",
        "properties": {
          "step": {
            "type": "integer"
          },
          "description": {
            "type": "text",
            "analyzer": "vietnamese_analyzer",
            "fields": {
              "suggest": {
                "type": "search_as_you_type",
                "analyzer": "vietnamese_suggest_analyzer",
                "max_shingle_size": 3
              },
              "trigram": {
                "type": "text",
                "analyzer": "trigram"
              },
              "reverse": {
                "type": "text",
                "analyzer": "reverse"
              }
            }
          }
        }
      },
      "images": {
        "type": "nested",
        "properties": {
          "url": {
            "type": "keyword"
          }
        }
      },
      "isDeleted": {
        "type": "boolean"
      },
      "createdAt": {
        "type": "date"
      }
    }
  }
}

{
  "settings": {
    "analysis": {
      "analyzer": {
        "vietnamese_analyzer": {
          "type": "custom",
          "tokenizer": "icu_tokenizer",
          "filter": [
            "lowercase",
            "icu_folding",
            "vietnamese_stop",
            "vietnamese_synonym"
          ]
        },
        "vietnamese_suggest_analyzer": {
          "type": "custom",
          "tokenizer": "icu_tokenizer",
          "filter": [
            "lowercase",
            "icu_folding"
          ]
        }
      },
      "filter": {
        "vietnamese_stop": {
          "type": "stop",
          "stopwords": [
            "có",
            "gì",
            "nào",
            "là",
            "thì",
            "với",
            "cho",
            "tại",
            "này",
            "đó",
            "ở",
            "và",
            "món",
            "nấu",
            "làm",
            "ăn",
            "hướng",
            "dẫn",
            "một",
            "những",
            "của",
            "trong",
            "được",
            "ra",
            "vào",
            "bằng",
            "trên",
            "dưới",
            "ngoài",
            "gần",
            "xa",
            "khi",
            "sau",
            "trước"
          ]
        },
        "vietnamese_synonym": {
          "type": "synonym",
          "synonyms": [
            "ngon => tuyệt vời, hấp dẫn",
            "chả giò => nem rán, chả ram",
            "cá => cá thu, cá hồi, cá lóc",
            "thịt => thịt heo, thịt bò, thịt gà",
            "nước mắm => mắm nêm, mắm tôm"
          ]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "id": {
        "type": "keyword"
      },
      "title": {
        "type": "text",
        "analyzer": "vietnamese_analyzer",
        "fields": {
          "suggest": {
            "type": "search_as_you_type",
            "analyzer": "vietnamese_suggest_analyzer",
            "max_shingle_size": 3
          }
        }
      },
      "description": {
        "type": "text",
        "analyzer": "vietnamese_analyzer"
      },
      "ingredients": {
        "type": "nested",
        "properties": {
          "name": {
            "type": "text",
            "analyzer": "vietnamese_analyzer",
            "fields": {
              "suggest": {
                "type": "search_as_you_type",
                "analyzer": "vietnamese_suggest_analyzer",
                "max_shingle_size": 3
              }
            }
          },
          "quantity": {
            "type": "keyword"
          }
        }
      },
      "instructions": {
        "type": "nested",
        "properties": {
          "step": {
            "type": "integer"
          },
          "description": {
            "type": "text",
            "analyzer": "vietnamese_analyzer"
          }
        }
      },
      "accountId": {
        "type": "keyword"
      },
      "accountName": {
        "type": "text",
        "analyzer": "vietnamese_analyzer"
      },
      "categoryIds": {
        "type": "keyword"
      },
      "difficulty": {
        "type": "keyword"
      },
      "cookingTime": {
        "type": "integer"
      },
      "servings": {
        "type": "integer"
      },
      "images": {
        "type": "nested",
        "properties": {
          "url": {
            "type": "keyword"
          }
        }
      },
      "isDeleted": {
        "type": "boolean"
      },
      "createdAt": {
        "type": "date"
      },
      "vector": {
        "type": "dense_vector",
        "dims": 384,
        "index": true,
        "similarity": "cosine"
      }
    }
  }
}

{
  "mappings": {
    "properties": {
      "id": {
        "type": "keyword"
      },
      "title": {
        "type": "text",
        "analyzer": "standard"
      },
      "description": {
        "type": "text",
        "analyzer": "standard"
      },
      "accountId": {
        "type": "keyword"
      },
      "accountName": {
        "type": "keyword"
      },
      "cookingTime": {
        "type": "integer"
      },
      "difficulty": {
        "type": "keyword"
      },
      "servings": {
        "type": "integer"
      },
      "isDeleted": {
        "type": "boolean"
      },
      "ingredients": {
        "type": "nested",
        "properties": {
          "name": {
            "type": "text"
          },
          "quantity": {
            "type": "keyword"
          }
        }
      },
      "instructions": {
        "type": "nested",
        "properties": {
          "step": {
            "type": "integer"
          },
          "description": {
            "type": "text"
          }
        }
      },
      "categories": {
        "type": "nested",
        "properties": {
          "id": {
            "type": "keyword"
          },
          "name": {
            "type": "keyword"
          }
        }
      },
      "ratingAvg": {
        "type": "float"
      },
      "likeCount": {
        "type": "integer"
      },
      "commentCount": {
        "type": "integer"
      },
      "vector": {
        "type": "dense_vector",
        "dims": 384,
        "index": true,
        "similarity": "cosine"
      },
      "createdAt": {
        "type": "date"
      },
      "updatedAt": {
        "type": "date"
      }
    }
  }
}
